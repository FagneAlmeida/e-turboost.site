<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Administração - Turboost</title>
    
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/output.css">

    <script>
        window.firebaseConfig = {{ firebase_config_json|safe }};
    </script>
</head>
<body class="bg-gray-900 text-gray-100 font-sans admin-body">

    <!-- Modal de Autenticação -->
    <div id="auth-modal-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-90 z-50 flex items-center justify-center">
        <div class="w-full max-w-md">
            <!-- Vista de Login -->
            <div id="login-view" class="bg-gray-800 p-8 rounded-lg shadow-xl">
                <h2 class="font-anton text-3xl text-yellow-400 text-center mb-6">Acesso Restrito</h2>
                <form id="login-form">
                    <input type="email" name="email" class="input-field mb-4" placeholder="Email" required>
                    <div class="relative mb-4">
                        <input type="password" name="password" id="login-password" class="input-field pr-10" placeholder="Senha" required>
                        <button type="button" id="toggle-login-password" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white"></button>
                    </div>
                    <button type="submit" class="btn btn-accent w-full">Entrar</button>
                    <p id="login-error" class="text-red-400 text-center mt-4 text-sm"></p>
                    <p class="text-center text-sm text-gray-400 mt-6">
                        Não tem uma conta? 
                        <button type="button" id="show-register-view-btn" class="font-medium text-yellow-400 hover:underline">Crie uma</button>
                    </p>
                </form>
            </div>
            <!-- Vista de Registo -->
            <div id="register-view" class="bg-gray-800 p-8 rounded-lg shadow-xl hidden">
                <h2 class="font-anton text-3xl text-yellow-400 text-center mb-6">Criar Conta de Admin</h2>
                <form id="register-form">
                    <input type="email" name="email" class="input-field mb-4" placeholder="Email" required>
                    <div class="relative mb-4">
                        <input type="password" name="password" id="register-password" class="input-field pr-10" placeholder="Senha" required>
                        <button type="button" id="toggle-register-password" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white"></button>
                    </div>
                    <button type="submit" class="btn btn-accent w-full">Criar Conta</button>
                    <p id="register-error" class="text-red-400 text-center mt-4 text-sm"></p>
                    <p class="text-center text-sm text-gray-400 mt-6">
                        Já tem uma conta? 
                        <button type="button" id="show-login-view-btn" class="font-medium text-yellow-400 hover:underline">Entre</button>
                    </p>
                </form>
            </div>
        </div>
    </div>

    <!-- Estrutura Principal do Painel -->
    <div id="main-content" class="hidden flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-800 p-4 flex flex-col">
            <h1 class="font-anton text-2xl text-yellow-400 mb-8 text-center">TURBOOST ADMIN</h1>
            <nav class="flex-grow">
                <a href="#" class="sidebar-link active" data-section="dashboard-section">Dashboard</a>
                <a href="#" class="sidebar-link" data-section="products-section">Produtos</a>
                <a href="#" class="sidebar-link" data-section="orders-section">Pedidos</a>
                <a href="#" class="sidebar-link" data-section="settings-section">Configurações</a>
            </nav>
            <div>
                <button id="logout-btn" class="sidebar-link w-full">Sair</button>
            </div>
        </aside>

        <!-- Área de Conteúdo Principal -->
        <main class="flex-1 p-8 overflow-y-auto">
            <section id="dashboard-section" class="content-section"></section>
            <section id="products-section" class="content-section hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold">Gestão de Produtos</h2>
                    <button id="add-product-btn" class="btn btn-accent">Adicionar Produto</button>
                </div>
                <div id="product-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-6"></div>
            </section>
            <section id="orders-section" class="content-section hidden"></section>
            <section id="settings-section" class="content-section hidden">
                <h2 class="text-3xl font-bold mb-6">Configurações do Site</h2>
                <form id="settings-form" class="bg-gray-800 p-8 rounded-lg">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-bold mb-4 text-yellow-400">Conteúdos Gerais</h3>
                            <label for="about_us_content" class="block text-sm font-medium text-gray-300 mb-2">Texto "Sobre Nós"</label>
                            <textarea id="about_us_content" name="about_us_content" class="input-field h-40" placeholder="Escreva aqui o conteúdo que aparecerá no modal 'Sobre Nós'..."></textarea>
                            <label for="institutional_video_link" class="block text-sm font-medium text-gray-300 mt-6 mb-2">Link do Vídeo Institucional (YouTube)</label>
                            <input type="url" id="institutional_video_link" name="institutional_video_link" class="input-field" placeholder="https://www.youtube.com/embed/...">
                        </div>
                        <div>
                            <h3 class="text-xl font-bold mb-4 text-yellow-400">Informações do Rodapé</h3>
                            <input type="text" name="footer_address" class="input-field mb-4" placeholder="Endereço Completo">
                            <input type="email" name="footer_email" class="input-field mb-4" placeholder="Email de Contacto">
                            <input type="tel" name="footer_phone" class="input-field mb-4" placeholder="Telefone de Contacto">
                            <input type="url" name="footer_facebook" class="input-field mb-4" placeholder="Link do Facebook">
                            <input type="url" name="footer_instagram" class="input-field mb-4" placeholder="Link do Instagram">
                            <input type="url" name="footer_youtube" class="input-field" placeholder="Link do YouTube">
                        </div>
                    </div>
                    <div class="text-right mt-8">
                        <button type="submit" class="btn btn-accent">Salvar Alterações</button>
                    </div>
                </form>
            </section>
        </main>
    </div>

    <!-- Modal de Produto -->
    <div id="product-modal-overlay" class="modal-overlay hidden">
        <div class="modal-content bg-gray-800 rounded-lg shadow-xl p-8 w-full max-w-3xl">
            <h2 id="modal-title" class="text-2xl font-bold mb-6">Adicionar Novo Produto</h2>
            <form id="product-form">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Imagem do Produto</label>
                        <div class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600 border-dashed rounded-md">
                            <div class="space-y-1 text-center">
                                <img id="image-preview" src="https://placehold.co/400x300/2c2c2c/FFF?text=Imagem" class="mx-auto h-40 w-auto rounded-md object-cover">
                                <div class="flex text-sm text-gray-400">
                                    <label for="image-upload" class="relative cursor-pointer bg-gray-700 rounded-md font-medium text-yellow-400 hover:text-yellow-300 focus-within:outline-none p-2">
                                        <span>Carregar um ficheiro</span>
                                        <input id="image-upload" name="image" type="file" class="sr-only">
                                    </label>
                                </div>
                                <p class="text-xs text-gray-500">PNG, JPG, GIF até 10MB</p>
                            </div>
                        </div>
                        <div class="mt-6">
                            <label for="isFeatured" class="flex items-center">
                                <input id="isFeatured" name="isFeatured" type="checkbox" class="h-4 w-4 text-yellow-500 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400">
                                <span class="ml-2 text-sm text-gray-300">Marcar como produto em destaque</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <input type="text" name="name" class="input-field mt-1" placeholder="Nome do Produto" required>
                        <input type="text" name="brand" class="input-field mt-4" placeholder="Marca">
                        <input type="text" name="category" class="input-field mt-4" placeholder="Categoria">
                        <div class="grid grid-cols-2 gap-4 mt-4">
                            <input type="number" name="price" class="input-field" placeholder="Preço" step="0.01" required>
                            <input type="number" name="stock" class="input-field" placeholder="Stock" required>
                        </div>
                        <textarea name="description" rows="4" class="input-field mt-4" placeholder="Descrição"></textarea>
                    </div>
                </div>
                <div class="flex justify-end gap-4 mt-8">
                    <button type="button" id="cancel-product-btn" class="btn btn-outline">Cancelar</button>
                    <button type="submit" class="btn btn-accent">Salvar Produto</button>
                </div>
            </form>
        </div>
    </div>
    
    <script type="module" src="/js/admin.js"></script>
</body>
</html>
